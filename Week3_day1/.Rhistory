library(tidyverse)
library(CodeClanData)
all_deaths
#quick look at the dataset
dim(all_deaths)
#check column names
names(all_deaths)
#print first few rows
head(all_deaths, 3)
#print first few top rows
head(all_deaths, 3)
#bottom rows
tail(all_deaths, 3)
#overview of data
glimpse(all_deaths)
#overview of data
glimpse(all_deaths)
view(all_deaths)
deaths <- select(all_deaths, name, alllegiances, year_of_death)
deaths <- select(all_deaths, name, allegiances, year_of_death)
deaths <- select(all_deaths, name, allegiances, year_of_death)
deaths
#select specific columns
deaths <- select(all_deaths, name, allegiances, year_of_death)
#select all columns but specifiied
deaths <- select(all_deaths, -name)
#select specific columns
deaths <- select(all_deaths, name, allegiances, year_of_death)
#select all columns but specifiied
deaths <- select(all_deaths, -name)
deaths
#select all colums starting with "book"
books <- select(all_deaths, starts_with("book"))
books
filtered <- filter(all_deaths, allegiances == "Lannister")
filtered <- filter(all_deaths, allegiances == "Lannister")
filtered
#display unique
unique(all_deaths$allegiances)
filtered <- filter(all_deaths, allegiances == "Lannister", "House Lannister")
filtered <- filter(all_deaths, allegiances == "Lannister")
filtered
filtered <- filter(all_deaths, allegiances == "Lannister", "House Lannister")
filtered <- filter(all_deaths, allegiances == "Lannister", "House Lannister")
filtered <- filter(all_deaths, allegiances == "Lannister", "House Lannister")
filtered <- filter(all_deaths, allegiances == "Lannister")
#multiple value filter
filtered <- filter(all_deaths, allegiances %in% c("Lannister", "House Lannister"))
filtered
males <- filter(all_deaths, allegiances == "None", gender = 0)
males <- filter(all_deaths, allegiances == "None", gender = 0)
males <- filter(all_deaths, allegiances == "None", gender == 0)
males
less_than_299 <- filter(all_deaths, year_of_death <= 299)
less_than_299 <- filter(all_deaths, year_of_death <= 299)
less_than_299
not_lan_fem <- filter(all_deaths, allegiances !%in% c("Lannister", "House Lannister"), gender == 1)
not_lan_fem <- filter(all_deaths, !allegiances %in% c("Lannister", "House Lannister"), gender == 1)
not_lan_fem <- filter(all_deaths, !allegiances %in% c("Lannister", "House Lannister"), gender == 1)
not_lan_fem
not_lan_fem <- filter(all_deaths, !allegiances %in% c("Lannister", "House Lannister"), gender == 0)
not_lan_fem
not_lan_fem <- filter(all_deaths, allegiances %in% !c("Lannister", "House Lannister"), gender == 0)
not_lan_fem <- filter(all_deaths, !allegiances %in% c("Lannister", "House Lannister"), gender == 0)
not_lan_fem
not_lan_fem <- filter(all_deaths, allegiances %in% -c("Lannister", "House Lannister"), gender == 0)
not_lan_fem <- filter(all_deaths, allegiances %notin% c("Lannister", "House Lannister"), gender == 0)
not_lan_fem <- filter(all_deaths, allegiances %in% -c("Lannister", "House Lannister"), gender == 0)
not_lan_fem <- filter(all_deaths, !allegiances %in% c("Lannister", "House Lannister"), gender == 0)
not_lan_fem
arrange(all_deaths, decs(all_deaths$nobility), desc(book_intro_chapter))
arrange(all_deaths, decs(nobility), desc(book_intro_chapter))
arrange(all_deaths, decs(nobility))
arrange(all_deaths, decs(nobility))
arrange(all_deaths, decs(nobility))
arrange(all_deaths, desc(nobility))
death_years <- mutate(all_deaths,
years_survived = year_of_death - 298)
death_years
mutate_all(death_years, as.logical())
mutate_all(death_years, as.logical)
#how many died in each family
deaths_grouped <- group_by(all_deaths, allegiances)
deaths_summarised <- summarise(deaths_grouped,
number_of_deaths = n())
deaths_summarised
death_pipe <- all_deaths %>%
select(name, allegiances, nobility, year_of_death) %>%
mutate(years_survived = year_of_death - 298) %>%
group_by(alleagiances) %>%
summarise(character_count = n()) %>%
arrange(desc(character_count))
death_pipe <- all_deaths %>%
select(name, allegiances, nobility, year_of_death) %>%
mutate(years_survived = year_of_death - 298) %>%
group_by(allegiances) %>%
summarise(character_count = n()) %>%
arrange(desc(character_count))
death_pipe
death_pipe <- all_deaths %>%
select(name, allegiances, nobility, year_of_death) %>%
mutate(years_survived = year_of_death - 298) %>%
group_by(allegiances) %>%
summarise(character_count = n()) %>%
arrange(desc(character_count))
death_pipe
all_deaths
death_pipe <- all_deaths %>%
select(name, allegiances, nobility, year_of_death) %>%
mutate(years_survived = year_of_death - 298) %>%
group_by(allegiances) %>%
summarise(character_count = n()) %>%
arrange(desc(character_count))
death_pipe
glimpse(all_deaths)
nobility_percentage <- all_deaths %>%
mutate(nobility_percent = (count(nobility)/ count(nobility) == 1)
nobility_percentage <- all_deaths %>%
mutate(nobility_percent = (count(nobility)/ count(nobility) == 1))
nobility_percentage <- all_deaths %>%
mutate(nobility_percentage = (count(nobility)/ count(nobility) == 1))
nobility_percentage <- all_deaths %>%
mutate(nobility_percentage = (count(nobility) / count(nobility) == 1))
nobility_percentage <- all_deaths %>%
mutate(nobility_percentage = (count(nobility) / count(nobility) == 1))
nobility_percentage <- all_deaths %>%
mutate(nobility_percentage = (count(nobility) / count(nobility) == TRUE))
nobility_percentage <- all_deaths %>%
select(nobility)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = count(nobility))
nobility_percentage <- all_deaths %>%
select(nobility) %>%
#mutate(nobility_percentage = )
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) #%>%
#mutate(nobility_percentage = )
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = sum(nobility))
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = sum(nobility) / count(nobility))
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = sum(nobility) / 917)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100) %>%
group_by(nobility)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100) %>%
group_by(allegiances)
nobility_percentage <- all_deaths %>%
select(nobility) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100) %>%
group_by(allegiances)
nobility_percentage <- all_deaths %>%
select(allegiances) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100) %>%
group_by(allegiances)
nobility_percentage <- all_deaths %>%
select(allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / 917)*100) %>%
group_by(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())*100) %>%
group_by(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n()) %>%
group_by(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())) %>%
group_by(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(name, allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())) %>%
group_by(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(name, allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())) %>%
group_by(allegiances)
summarise(allegiances)
nobility_percentage <- all_deaths %>%
select(name, allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())) %>%
group_by(allegiances) %>%
summarise(allegiances)
nobility_percentage
nobility_percentage <- all_deaths %>%
select(name, allegiances, nobility) %>%
mutate(nobility_percentage = (sum(nobility) / n())) %>%
group_by(allegiances)
nobility_percentage
?n
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100)
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
nobility_percentage
nobility_percentage
nobility_percentage <- all_deaths %>%
filter(nobility == 1) %>%
group_by(allegiances) %>%
summarise(noble_count = n()) %>%
mutate(nobility_percent = noble_count / sum(noble_count) * 100) %>%
arrange(desc(nobility_percentage))
nobility_percentage
data_frame <- read_csv("../Week3_day1/03_dplyr_practice/data/state_income_data.csv")
data_frame
data_frame1 <- read_csv("../Week3_day1/03_dplyr_practice/data/state_income_data.csv")
data_frame1
data_frame1 <- read_csv("../Week3_day1/03_dplyr_practice/data/state_income_data.csv")
glimpse(data_frame1)
data_frame1 <- read_csv("../Week3_day1/03_dplyr_practice/data/state_income_data.csv")
glimpse(data_frame1)
data_frame1
years_extract <- data_frame1 %>%
select("Y2002", "Y2003")
years_extract <- data_frame1 %>%
select("Y2002", "Y2003")
years_extract
data_frame1 <- read_csv("03_dplyr_practice/data/state_income_data.csv")
glimpse(data_frame1)
data_frame1
years_extract <- data_frame1 %>%
select("Y2002", "Y2003", "Y2004", "Y2005", "Y2006", "Y2007", "Y2008")
years_extract
data_frame1 <- read_csv("03_dplyr_practice/data/state_income_data.csv")
glimpse(data_frame1)
data_frame1
?rename
rename_index_col <- data_frame1 %>%
rename(first_letter = Index)
remame_index_col
rename_index_col <- data_frame1 %>%
rename(first_letter = Index)
remame_index_col
rename_index_col <- data_frame1 %>%
rename(first_letter = Index)
remame_index_col
rename_index_col <- data_frame1 %>%
rename(first_letter = Index)
remame_index_col
rename_index_col <- data_frame1 %>%
rename(first_letter = Index)
rename_index_col
years_extract <- data_frame1 %>%
select("Index","State","Y2002", "Y2003", "Y2004", "Y2005", "Y2006", "Y2007", "Y2008")
years_extract
abc_states <- data_frame %>%
filter(data_frame1, first_letter %in% c("A", "B", "C"))
abc_states <- data_frame %>%
filter(data_frame1, Index %in% c("A","B","C"))
abc_states <- data_frame %>%
filter(data_frame1, index %in% c("A","B","C"))
abc_states <- data_frame1 %>%
filter(data_frame1, index %in% c("A","B","C"))
abc_states <- rename_index_col %>%
filter(rename_index_col, index %in% c("A","B","C"))
abc_states <- rename_index_col %>%
filter(rename_index_col, first_letter %in% c("A","B","C"))
abc_states <- rename_index_col %>%
filter(rename_index_col, first_letter %in% c("A","C","D"))
abc_states <- rename_index_col %>%
filter(rename_index_col, first_letter %in% c("A", "B", "C"))
abc_states <- rename_index_col %>%
filter(rename_index_col, first_letter %in% "A"))
abc_states <- rename_index_col %>%
filter(rename_index_col, first_letter %in% "A")
abc_states <- rename_index_col %>%
filter(first_letter %in% "A")
abc_states
abc_states <- rename_index_col %>%
filter(first_letter %in% "A", "B", "C")
abc_states <- rename_index_col %>%
filter(first_letter %in% c("A", "B", "C"))
abc_states
greatest_income_abc <- abc_states %>%
max(Y2008)
?max
greatest_income_abc <- abc_states %>%
max("Y2008")
greatest_income_abc <- abc_states %>%
max(Y2008)
greatest_income_abc <- abc_states %>%
max(greatest_income_abc$Y2008)
greatest_income_abc <- abc_states %>%
max(Y2008)
greatest_income_abc <- abc_states %>%
arrange(Y2008)
greatest_income_abc
greatest_income_abc <- abc_states %>%
arrange(desc(Y2008))
greatest_income_abc
income_change <- greatest_income_abc %>%
mutate(income_change, (Y2008 - Y2002) / Y2002)
income_change <- greatest_income_abc %>%
mutate(income_change = (Y2008 - Y2002) / Y2002)
income_change
summary(income_change)
transpose(income_change)
summary(income_change)
pivot_longer(income_change)
?pivot_longer
pivot_longer(income_change, c("Alabama", "Colorado", "Connecticut", "Arizona",
"Alaska", "California", "Arkansas"))
pivot_wider(income_change, c("Alabama", "Colorado", "Connecticut", "Arizona",
"Alaska", "California", "Arkansas"))
income_change <- greatest_income_abc %>%
mutate(income_change = (Y2008 - Y2002))
income_change
summarise(income_change,
income_change_mean = mean(income_change),
income_change_median = median(income_change))
# create subject info tibble
subject_hr <- tibble( name = c("SUBJ01","SUBJ02","SUBJ03"),
hr_am = c(68,72,68),
hr_pm = c(58,89,52))
# create subject info tibble
subject_hr <- tibble( name = c("SUBJ01","SUBJ02","SUBJ03"),
hr_am = c(68,72,68),
hr_pm = c(58,89,52))
messy_orders <- tibble( name = c("Joe Bloggs","Jane Smith","Penny Jones"),
order_info = c("XY7282/29-06-19","LO0182/15-03-19","AS6812/04-06-19"),
order_amount = c(58.00,125.00,75.25))
# create subject info tibble
subject_hr <- tibble( name = c("SUBJ01","SUBJ02","SUBJ03"),
hr_am = c(68,72,68),
hr_pm = c(58,89,52))
messy_orders <- tibble( name = c("Joe Bloggs","Jane Smith","Penny Jones"),
order_info = c("XY7282/29-06-19","LO0182/15-03-19","AS6812/04-06-19"),
order_amount = c(58.00,125.00,75.25))
income <- tibble(religion = c("Agnostic","Atheist","Buddhist", "Catholic"),
X10k = c(12,25,3,75),
X10k_to_20k = c(34,14,6,60),
X20k_to_30k = c(45,22,10,110))
subject_hr
hr_clean <- subject_hr %>%
pivot_longer(cols = c("hr_am", "hr_pm"),
names_to = "measurement_time",
values_to = "heart_rate")
hr_clean
messy_orders
tidy_orders <- messy_orders %>%
separate(col = order_info,
into = c("order_number", "order_date"),
sep = "/")
tidy_orders
income
tidy_income <- income %>%
pivot_longer(cols = -religion,
names_to = "income",
values_to = "amount")
tidy_income
tidy_income <- income %>%
rename("10k" = X10k, "10k to 20k" = X10k_to_20k, "20k to 30k" = X20k_to_30k)
pivot_longer(cols = -religion,
names_to = "income",
values_to = "amount")
tidy_income <- income %>%
rename("10k" = X10k)
pivot_longer(cols = -religion,
names_to = "income",
values_to = "amount")
tidy_income <- income %>%
rename("10k" = X10k) %>%
pivot_longer(cols = -religion,
names_to = "income",
values_to = "amount")
tidy_income
tidy_income <- income %>%
rename("10k to 20k" = X10k_to_20k, "20k to 30k" = X20k_to_30k) %>%
pivot_longer(cols = -religion,
names_to = "income",
values_to = "amount")
tidy_income
hospital_visits <- read_csv("05_tidyr/data/hospitals93to98.csv")
hospital_visits
#sort out years
hospital_long <- pivot_longer() %>%
pivot_longer(cols = starts_with("FY"),
names_to = "year",
values_to = "visit_numbers")
#sort out years
hospital_long <- hospital_visits %>%
pivot_longer(cols = starts_with("FY"),
names_to = "year",
values_to = "visit_numbers")
hospital_long
hospitals_wide <- hospital_long %>%
pivot_wider(names_from = Field,
values_from = visit_numbers))
hospitals_wide <- hospital_long %>%
pivot_wider(names_from = Field,
values_from = visit_numbers)
hospitals_wide
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = ". ")
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = ".")
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = "\\.")
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = "\\.")
hospital_visits_final
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = "\\. ")
hospital_visits_final
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = "\\. ")
hospital_visits_final
hospital_visits_final <- hospitals_wide %>%
separate(col = IcdChapter,
into = c("code", "description"),
sep = "\\.")
hospital_visits_final
#unite
united_test <- hospital_visits_final %>%
unite(col = decease,
c("code", "description"),
sep = ";")
united_test
